/**********************************************************
  STREAMBOX — Full Apple-style Redesign (Light/Dark Ready)
***********************************************************/
* { box-sizing: border-box; }
html, body { height: 100%; }
:root {
  --bg: #f6f7fb;
  --bg-elev: rgba(255,255,255,0.78);
  --bg-elev-strong: rgba(255,255,255,0.9);
  --text: #0b0c0f;
  --text-muted: #6b7280;
  --border: rgba(12, 18, 28, 0.10);
  --border-strong: rgba(12, 18, 28, 0.16);
  --brand: #1d4ed8;
  --brand-ghost: rgba(29,78,216,.12);
  --success: #0f766e; --danger: #b91c1c;
  --shadow: 0 10px 30px rgba(12, 18, 28, .08);
  --shadow-2: 0 16px 44px rgba(12, 18, 28, .12);
  --radius-lg: 16px; --radius-md: 12px; --radius-sm: 10px;
  --transition: 160ms ease; --glass-blur: 8px;
}
body[data-theme="dark"] {
  --bg: #0c0d11; --bg-elev: rgba(21,23,29,0.72); --bg-elev-strong: rgba(21,23,29,0.88);
  --text: #eef2ff; --text-muted: #a3a9b7;
  --border: rgba(255,255,255,0.08); --border-strong: rgba(255,255,255,0.12);
  --brand: #60a5fa; --brand-ghost: rgba(96,165,250,.14);
  --shadow: 0 10px 30px rgba(0,0,0,.35); --shadow-2: 0 18px 60px rgba(0,0,0,.45);
}
@media (prefers-color-scheme: dark) {
  body:not([data-theme="light"]) { 
    --bg: #0c0d11; --bg-elev: rgba(21,23,29,0.72); --bg-elev-strong: rgba(21,23,29,0.88);
    --text: #eef2ff; --text-muted: #a3a9b7;
    --border: rgba(255,255,255,0.08); --border-strong: rgba(255,255,255,0.12);
    --brand: #60a5fa; --brand-ghost: rgba(96,165,250,.14);
    --shadow: 0 10px 30px rgba(0,0,0,.35); --shadow-2: 0 18px 60px rgba(0,0,0,.45);
  }
}
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, sans-serif;
  color: var(--text);
  background:
    radial-gradient(1400px 800px at 10% -10%, rgba(29,78,216,.06), transparent 60%),
    radial-gradient(900px 700px at 110% 10%, rgba(99,102,241,.06), transparent 50%),
    var(--bg);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}
.shell { max-width: 1200px; margin: 18px auto; padding: 0 16px; }
.card {
  background: var(--bg-elev); border: 1px solid var(--border); border-radius: var(--radius-lg);
  box-shadow: var(--shadow); backdrop-filter: saturate(120%) blur(var(--glass-blur));
}

h1, h2, h3 { margin: 0; letter-spacing: -0.01em; }
h1 { font-size: 22px; } h2 { font-size: 20px; } h3 { font-size: 18px; }
.muted { color: var(--text-muted); }

input, button {
  border: 1px solid var(--border); border-radius: var(--radius-md);
  background: var(--bg-elev-strong); color: var(--text);
  transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition), background var(--transition);
}
input { padding: 12px 14px; width: 100%; outline: none; }
input:focus { border-color: var(--brand); box-shadow: 0 0 0 4px var(--brand-ghost); }
button { padding: 12px 16px; cursor: pointer; user-select: none; }
button:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
button:active { transform: translateY(0); }
button.primary {
  background: linear-gradient(180deg, var(--brand), color-mix(in oklab, var(--brand), black 8%));
  color: #fff; border-color: color-mix(in oklab, var(--brand), black 12%);
  box-shadow: 0 6px 18px color-mix(in oklab, var(--brand), transparent 85%);
}
button.primary:hover { box-shadow: 0 10px 28px color-mix(in oklab, var(--brand), transparent 78%); }

.row { display: flex; gap: 12px; align-items: center; }
.row.wrap { flex-wrap: wrap; }

/* Auth */
.auth-wrap { max-width: 520px; margin: 12vh auto; padding: 0 16px; }
.auth-card { padding: 26px 22px 22px; }
.brand { display: flex; gap: 10px; align-items: center; margin-bottom: 8px; }
.logo-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--brand); box-shadow: 0 0 20px color-mix(in oklab, var(--brand), transparent 60%); }
.sub { margin: 6px 0 16px; }
.auth-row { gap: 10px; }
.auth-actions { gap: 10px; margin-top: 10px; }
.oauth { display: flex; flex-direction: column; gap: 10px; margin-top: 14px; }
.btn-apple, .btn-google { display:flex; align-items:center; justify-content:center; gap:10px; background: var(--bg-elev-strong); }
.btn-apple:hover, .btn-google:hover { transform: translateY(-1px); }
.divider { display:flex; align-items:center; gap:12px; margin:16px 0; color: var(--text-muted); }
.divider::before, .divider::after { content:""; height:1px; flex:1; background: var(--border); }

/* Topbar */
.topbar { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; }
.actions button { background: var(--bg-elev-strong); }

/* Layout */
.dash { display:grid; gap:14px; margin-top:14px; grid-template-columns: 280px 1fr; }
@media (max-width: 980px) { .dash { grid-template-columns: 1fr; } }
.folders { padding: 14px; }
.folders-head { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; }
#folder-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
#folder-list li {
  padding: 10px 12px; border: 1px solid var(--border); border-radius: var(--radius-md);
  background: var(--bg-elev-strong); cursor: pointer; transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition);
}
#folder-list li:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
#folder-list li.active { outline: 2px solid var(--brand); background: color-mix(in oklab, var(--bg-elev-strong), var(--brand-ghost) 80%); }
.main { padding: 14px; }

/* Dropzone */
.drop {
  border: 1.5px dashed var(--border-strong);
  border-radius: var(--radius-lg);
  text-align: center; padding: 22px; background: var(--bg-elev-strong);
  transition: border-color var(--transition), box-shadow var(--transition), transform var(--transition);
}
.drop:hover { border-color: var(--brand); box-shadow: var(--shadow); transform: translateY(-1px); }
.drop a { color: var(--brand); text-decoration: none; }

/* File list */
#file-list.grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(230px,1fr)); gap:14px; list-style:none; padding:0; margin:14px 0 0; }
#file-list.row-list { display:flex; flex-direction:column; gap:10px; list-style:none; padding:0; margin:14px 0 0; }

.file-card {
  position:relative; border:1px solid var(--border); border-radius: var(--radius-lg);
  background: var(--bg-elev-strong); padding:10px;
  transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
}
.file-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: var(--border-strong); }
.thumb {
  height:150px; border-radius: var(--radius-md); background: color-mix(in oklab, var(--bg-elev), black 4%);
  display:flex; align-items:center; justify-content:center; overflow:hidden; border:1px solid var(--border);
}
.thumb img, .thumb video { max-width:100%; max-height:100%; display:block; }
.file-name { margin-top:8px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.row-item {
  display:flex; align-items:center; gap:12px; border:1px solid var(--border); border-radius: var(--radius-md);
  background: var(--bg-elev-strong); padding:10px; transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
}
.row-item:hover { transform: translateY(-1px); box-shadow: var(--shadow); border-color: var(--border-strong); }
.row-thumb {
  width:62px; height:46px; border-radius: var(--radius-md); background: color-mix(in oklab, var(--bg-elev), black 4%);
  display:flex; align-items:center; justify-content:center; overflow:hidden; border:1px solid var(--border);
}
.row-thumb img { width:100%; height:100%; object-fit:cover; }
.row-name { flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Kebab + Menu */
.kebab, .kebab-row {
  width:28px; height:28px; border-radius:10px; background: var(--bg-elev);
  border:1px solid var(--border); display:flex; align-items:center; justify-content:center; cursor:pointer;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
}
.kebab:hover, .kebab-row:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
.kebab::before, .kebab-row::before { content:"⋮"; color: var(--text-muted); }
.file-card .kebab { position:absolute; top:8px; right:8px; z-index:20; }
.menu {
  position:absolute; min-width:200px; z-index:9999; background: var(--bg-elev-strong);
  border:1px solid var(--border-strong); border-radius: var(--radius-md); box-shadow: var(--shadow-2);
  overflow:hidden; animation: menuPop .12s ease-out both; backdrop-filter: saturate(120%) blur(8px);
}
@keyframes menuPop { from { opacity:0; transform: translateY(-4px) scale(.98);} to { opacity:1; transform:translateY(0) scale(1);} }
.menu button { all:unset; width:100%; padding:10px 12px; cursor:pointer; color: var(--text); border-bottom:1px solid var(--border); }
.menu button:last-child { border-bottom:0; }
.menu button:hover { background: color-mix(in oklab, var(--bg-elev-strong), var(--brand-ghost) 60%); }

/* Section title */
#section-title { margin: 14px 0 6px; }

/* Modal */
.overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: color-mix(in oklab, #000, transparent 45%); backdrop-filter: saturate(140%) blur(6px); z-index:10000; }
.modal {
  width:min(520px,92vw); background: var(--bg-elev-strong); border:1px solid var(--border-strong);
  border-radius:18px; box-shadow: var(--shadow-2); padding:16px; animation: modalIn .16s ease-out both; backdrop-filter: blur(10px);
}
@keyframes modalIn { from { opacity:0; transform: translateY(6px) scale(.98);} to { opacity:1; transform: translateY(0) scale(1);} }
.list { max-height:320px; overflow:auto; border:1px solid var(--border); border-radius: var(--radius-md); background: var(--bg-elev); }
.opt { display:flex; align-items:center; gap:10px; padding:10px 12px; border-bottom:1px solid var(--border); cursor:pointer; transition: background var(--transition); }
.opt:last-child { border-bottom:0; }
.opt:hover { background: color-mix(in oklab, var(--bg-elev), var(--brand-ghost) 60%); }
.opt input { accent-color: var(--brand); }
.modal .actions { display:flex; justify-content:flex-end; gap:10px; margin-top:12px; }

/* Toasts */
#toasts { position:fixed; top:18px; right:18px; display:flex; flex-direction:column; gap:12px; z-index:12000; }
.toast { min-width:280px; max-width:420px; padding:12px 14px; border-radius: var(--radius-md); border:1px solid var(--border-strong); background: var(--bg-elev-strong); color: var(--text); box-shadow: var(--shadow); animation: toastIn .14s ease-out both; }
@keyframes toastIn { from { opacity:0; transform: translateY(-6px);} to { opacity:1; transform: translateY(0);} }
.toast.success { border-color: color-mix(in oklab, var(--success), transparent 70%); }
.toast.error { border-color: color-mix(in oklab, var(--danger), transparent 70%); }
.toast.info { border-color: color-mix(in oklab, var(--brand), transparent 70%); }
.toast small { display:block; opacity:.85; font-size:12px; margin-top:2px; }

/* Focus */
:focus-visible { outline:3px solid var(--brand-ghost); outline-offset:2px; border-radius:12px; }
